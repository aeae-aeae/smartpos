<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartPOS Pro - ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Poppins', -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px; }
        #root { padding: 20px; max-width: 1600px; margin: 0 auto; }
        
        @media print {
            body * { visibility: hidden; }
            #printableReceipt, #printableReceipt * { visibility: visible; }
            #printableReceipt {
                position: absolute;
                left: 0;
                top: 0;
                width: 80mm;
                padding: 10mm;
                background: white;
            }
            @page { size: 80mm auto; margin: 0; }
        }
        
        @media (max-width: 768px) {
            #root { padding: 10px; }
            .grid-2 { grid-template-columns: 1fr !important; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Icons
        const Icon = ({ d, size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                {d}
            </svg>
        );

        const Icons = {
            ShoppingCart: (props) => <Icon {...props} d={<><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></>} />,
            Search: (props) => <Icon {...props} d={<><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></>} />,
            Plus: (props) => <Icon {...props} d={<><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></>} />,
            Minus: (props) => <Icon {...props} d={<line x1="5" y1="12" x2="19" y2="12"/>} />,
            Trash: (props) => <Icon {...props} d={<><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></>} />,
            Package: (props) => <Icon {...props} d={<><path d="M16.5 9.4 7.55 4.24"/><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></>} />,
            Users: (props) => <Icon {...props} d={<><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></>} />,
            Truck: (props) => <Icon {...props} d={<><rect x="1" y="3" width="15" height="13"/><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></>} />,
            BarChart: (props) => <Icon {...props} d={<><path d="M3 3v18h18"/><path d="M18 17V9"/><path d="M13 17V5"/><path d="M8 17v-3"/></>} />,
            Settings: (props) => <Icon {...props} d={<><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6m9-9h-6m-6 0H3"/></>} />,
            Printer: (props) => <Icon {...props} d={<><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect x="6" y="14" width="12" height="8"/></>} />,
            Download: (props) => <Icon {...props} d={<><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></>} />,
            Upload: (props) => <Icon {...props} d={<><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></>} />,
            Check: (props) => <Icon {...props} d={<><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></>} />,
            X: (props) => <Icon {...props} d={<><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></>} />,
            Edit: (props) => <Icon {...props} d={<path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/>} />,
        };

        // Default Data
        const defaultProducts = [
            { id: 1, name: '‡∏Å‡∏≤‡πÅ‡∏ü‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤‡πÇ‡∏ô‡πà', category: '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°', price: 45, cost: 20, stock: 50, image: '‚òï', barcode: '001' },
            { id: 2, name: '‡∏Ñ‡∏≤‡∏õ‡∏π‡∏ä‡∏¥‡πÇ‡∏ô‡πà', category: '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°', price: 55, cost: 25, stock: 45, image: '‚òï', barcode: '002' },
            { id: 3, name: '‡∏ä‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß', category: '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°', price: 40, cost: 18, stock: 60, image: 'üçµ', barcode: '003' },
            { id: 4, name: '‡∏Ñ‡∏∏‡∏Å‡∏Å‡∏µ‡πâ', category: '‡∏Ç‡∏≠‡∏á‡∏´‡∏ß‡∏≤‡∏ô', price: 30, cost: 12, stock: 80, image: 'üç™', barcode: '004' },
            { id: 5, name: '‡πÅ‡∏ã‡∏ô‡∏î‡πå‡∏ß‡∏¥‡∏ä', category: '‡∏≠‡∏≤‡∏´‡∏≤‡∏£', price: 65, cost: 30, stock: 30, image: 'ü•™', barcode: '005' },
            { id: 6, name: '‡πÇ‡∏î‡∏ô‡∏±‡∏ó', category: '‡∏Ç‡∏≠‡∏á‡∏´‡∏ß‡∏≤‡∏ô', price: 35, cost: 15, stock: 40, image: 'üç©', barcode: '006' },
        ];

        const defaultStore = {
            name: 'My Smart Caf√©',
            address: '123 ‡∏ñ‡∏ô‡∏ô‡∏™‡∏∏‡∏Ç‡∏∏‡∏°‡∏ß‡∏¥‡∏ó ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø',
            phone: '02-123-4567',
            taxId: '0123456789012',
            logo: 'üè™',
            enableVAT: false
        };

        // Main App
        function App() {
            const [page, setPage] = useState('pos');
            const [cart, setCart] = useState([]);
            const [products, setProducts] = useState(() => {
                const saved = localStorage.getItem('smartpos-products');
                return saved ? JSON.parse(saved) : defaultProducts;
            });
            const [transactions, setTransactions] = useState(() => {
                const saved = localStorage.getItem('smartpos-transactions');
                return saved ? JSON.parse(saved) : [];
            });
            const [customers, setCustomers] = useState(() => {
                const saved = localStorage.getItem('smartpos-customers');
                return saved ? JSON.parse(saved) : [];
            });
            const [orders, setOrders] = useState(() => {
                const saved = localStorage.getItem('smartpos-orders');
                return saved ? JSON.parse(saved) : [];
            });
            const [store, setStore] = useState(() => {
                const saved = localStorage.getItem('smartpos-store');
                return saved ? JSON.parse(saved) : defaultStore;
            });

            const [category, setCategory] = useState('‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î');
            const [search, setSearch] = useState('');
            const [discount, setDiscount] = useState(0);
            const [discountType, setDiscountType] = useState('percent');
            const [showReceipt, setShowReceipt] = useState(false);
            const [lastReceipt, setLastReceipt] = useState(null);
            const [selectedCustomer, setSelectedCustomer] = useState(null);

            useEffect(() => { localStorage.setItem('smartpos-products', JSON.stringify(products)); }, [products]);
            useEffect(() => { localStorage.setItem('smartpos-transactions', JSON.stringify(transactions)); }, [transactions]);
            useEffect(() => { localStorage.setItem('smartpos-customers', JSON.stringify(customers)); }, [customers]);
            useEffect(() => { localStorage.setItem('smartpos-orders', JSON.stringify(orders)); }, [orders]);
            useEffect(() => { localStorage.setItem('smartpos-store', JSON.stringify(store)); }, [store]);

            const categories = ['‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î', ...new Set(products.map(p => p.category))];
            const filteredProducts = products.filter(p => 
                (category === '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' || p.category === category) &&
                (p.name.toLowerCase().includes(search.toLowerCase()) || p.barcode?.includes(search))
            );

            const addToCart = (product) => {
                if (product.stock <= 0) return alert('‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î!');
                const existing = cart.find(item => item.id === product.id);
                if (existing) {
                    if (existing.quantity >= product.stock) return alert('‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠!');
                    setCart(cart.map(item => item.id === product.id ? { ...item, quantity: item.quantity + 1 } : item));
                } else {
                    setCart([...cart, { ...product, quantity: 1 }]);
                }
            };

            const updateQty = (id, delta) => {
                const product = products.find(p => p.id === id);
                setCart(cart.map(item => {
                    if (item.id === id) {
                        const newQty = Math.max(1, Math.min(product.stock, item.quantity + delta));
                        return { ...item, quantity: newQty };
                    }
                    return item;
                }));
            };

            const removeFromCart = (id) => setCart(cart.filter(item => item.id !== id));
            const clearCart = () => { setCart([]); setDiscount(0); setSelectedCustomer(null); };

            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const discountAmt = discountType === 'percent' ? (subtotal * discount) / 100 : discount;
            const tax = store.enableVAT ? (subtotal - discountAmt) * 0.07 : 0;
            const total = subtotal - discountAmt + tax;
            const cartCost = cart.reduce((sum, item) => sum + (item.cost * item.quantity), 0);

            const checkout = (method) => {
                const receipt = {
                    id: `#${String(transactions.length + 1).padStart(6, '0')}`,
                    date: new Date().toISOString(),
                    items: cart,
                    subtotal, discount: discountAmt, tax, total,
                    cost: cartCost, profit: total - cartCost,
                    paymentMethod: method,
                    customer: selectedCustomer,
                    vatEnabled: store.enableVAT
                };
                setLastReceipt(receipt);
                setShowReceipt(true);
                setTransactions([...transactions, receipt]);
                setProducts(products.map(p => {
                    const cartItem = cart.find(i => i.id === p.id);
                    return cartItem ? { ...p, stock: p.stock - cartItem.quantity } : p;
                }));
                clearCart();
            };

            const exportData = () => {
                const data = { products, transactions, customers, orders, store, exportDate: new Date().toISOString() };
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `smartpos-backup-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);
            };

            const importData = (e) => {
                const file = e.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = (ev) => {
                    try {
                        const data = JSON.parse(ev.target.result);
                        if (!window.confirm('‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏° ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) return;
                        if (data.products) setProducts(data.products);
                        if (data.transactions) setTransactions(data.transactions);
                        if (data.customers) setCustomers(data.customers);
                        if (data.orders) setOrders(data.orders);
                        if (data.store) setStore(data.store);
                        alert('‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
                    } catch (error) {
                        alert('‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                    }
                };
                reader.readAsText(file);
            };

            const today = new Date();
            const todayTxns = transactions.filter(t => new Date(t.date).toDateString() === today.toDateString());
            const todaySales = todayTxns.reduce((sum, t) => sum + t.total, 0);
            const todayProfit = todayTxns.reduce((sum, t) => sum + t.profit, 0);

            return (
                <div>
                    {/* Header */}
                    <div style={{
                        background: 'rgba(255,255,255,0.98)',
                        borderRadius: '24px',
                        padding: '20px 30px',
                        marginBottom: '20px',
                        boxShadow: '0 20px 60px rgba(0,0,0,0.15)',
                        animation: 'fadeIn 0.5s'
                    }}>
                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap', gap: '16px', marginBottom: '20px' }}>
                            <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>
                                <div style={{
                                    fontSize: '40px',
                                    width: '60px',
                                    height: '60px',
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'center',
                                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                                    borderRadius: '18px',
                                    boxShadow: '0 8px 20px rgba(102,126,234,0.4)'
                                }}>{store.logo}</div>
                                <div>
                                    <h1 style={{
                                        margin: 0,
                                        fontSize: '28px',
                                        fontWeight: '800',
                                        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                                        WebkitBackgroundClip: 'text',
                                        WebkitTextFillColor: 'transparent'
                                    }}>{store.name}</h1>
                                    <p style={{ margin: 0, fontSize: '13px', color: '#64748b', fontWeight: '500' }}>
                                        ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£
                                    </p>
                                </div>
                            </div>
                            <div style={{
                                background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                                padding: '12px 20px',
                                borderRadius: '12px',
                                color: 'white',
                                textAlign: 'center',
                                minWidth: '140px',
                                boxShadow: '0 4px 15px rgba(16,185,129,0.3)'
                            }}>
                                <div style={{ fontSize: '11px', fontWeight: '600', opacity: 0.9 }}>‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>
                                <div style={{ fontSize: '20px', fontWeight: '700' }}>
                                    ‡∏ø{todaySales.toLocaleString('th-TH', { minimumFractionDigits: 2 })}
                                </div>
                            </div>
                        </div>

                        <div style={{ display: 'flex', gap: '12px', flexWrap: 'wrap' }}>
                            {[
                                { id: 'pos', icon: Icons.ShoppingCart, label: '‡∏Ç‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô' },
                                { id: 'customers', icon: Icons.Users, label: '‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤' },
                                { id: 'delivery', icon: Icons.Truck, label: '‡∏à‡∏±‡∏î‡∏™‡πà‡∏á' },
                                { id: 'products', icon: Icons.Package, label: '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤' },
                                { id: 'dashboard', icon: Icons.BarChart, label: '‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô' },
                                { id: 'settings', icon: Icons.Settings, label: '‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤' }
                            ].map(({ id, icon: Icon, label }) => (
                                <button key={id} onClick={() => setPage(id)} style={{
                                    background: page === id ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' : 'white',
                                    color: page === id ? 'white' : '#64748b',
                                    border: 'none',
                                    padding: '14px 24px',
                                    borderRadius: '14px',
                                    fontSize: '14px',
                                    fontWeight: '600',
                                    cursor: 'pointer',
                                    display: 'flex',
                                    alignItems: 'center',
                                    gap: '8px',
                                    transition: 'all 0.2s',
                                    boxShadow: page === id ? '0 4px 15px rgba(102,126,234,0.3)' : 'none'
                                }}>
                                    <Icon size={18} />
                                    {label}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Pages */}
                    {page === 'pos' && (
                        <POSPage
                            products={filteredProducts}
                            cart={cart}
                            category={category}
                            setCategory={setCategory}
                            search={search}
                            setSearch={setSearch}
                            categories={categories}
                            addToCart={addToCart}
                            updateQty={updateQty}
                            removeFromCart={removeFromCart}
                            clearCart={clearCart}
                            discount={discount}
                            setDiscount={setDiscount}
                            discountType={discountType}
                            setDiscountType={setDiscountType}
                            subtotal={subtotal}
                            discountAmt={discountAmt}
                            tax={tax}
                            total={total}
                            checkout={checkout}
                            showReceipt={showReceipt}
                            setShowReceipt={setShowReceipt}
                            lastReceipt={lastReceipt}
                            store={store}
                            customers={customers}
                            selectedCustomer={selectedCustomer}
                            setSelectedCustomer={setSelectedCustomer}
                        />
                    )}

                    {page === 'customers' && <CustomersPage customers={customers} setCustomers={setCustomers} />}
                    {page === 'delivery' && <DeliveryPage orders={orders} setOrders={setOrders} customers={customers} transactions={transactions} />}
                    {page === 'products' && <ProductsPage products={products} setProducts={setProducts} />}
                    {page === 'dashboard' && <DashboardPage transactions={transactions} todaySales={todaySales} todayProfit={todayProfit} todayTxns={todayTxns} />}
                    {page === 'settings' && <SettingsPage store={store} setStore={setStore} exportData={exportData} importData={importData} />}
                </div>
            );
        }

        // POS Page
        function POSPage({ products, cart, category, setCategory, search, setSearch, categories, addToCart, updateQty, removeFromCart, clearCart, discount, setDiscount, discountType, setDiscountType, subtotal, discountAmt, tax, total, checkout, showReceipt, setShowReceipt, lastReceipt, store, customers, selectedCustomer, setSelectedCustomer }) {
            return (
                <div style={{ display: 'grid', gridTemplateColumns: window.innerWidth > 768 ? '1fr 450px' : '1fr', gap: '20px' }} className="grid-2">
                    <div style={{ background: 'rgba(255,255,255,0.98)', borderRadius: '24px', padding: '25px', boxShadow: '0 20px 60px rgba(0,0,0,0.15)', animation: 'slideUp 0.5s' }}>
                        <div style={{ position: 'relative', marginBottom: '20px' }}>
                            <div style={{ position: 'absolute', left: '16px', top: '50%', transform: 'translateY(-50%)', color: '#94a3b8' }}>
                                <Icons.Search size={20} />
                            </div>
                            <input type="text" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤..." value={search} onChange={(e) => setSearch(e.target.value)}
                                style={{ width: '100%', padding: '14px 14px 14px 48px', border: '2px solid #e2e8f0', borderRadius: '16px', fontSize: '15px', outline: 'none' }} />
                        </div>

                        <div style={{ display: 'flex', gap: '10px', marginBottom: '25px', overflowX: 'auto', paddingBottom: '5px' }}>
                            {categories.map(cat => (
                                <button key={cat} onClick={() => setCategory(cat)} style={{
                                    padding: '10px 24px',
                                    borderRadius: '12px',
                                    border: 'none',
                                    fontSize: '14px',
                                    fontWeight: '600',
                                    cursor: 'pointer',
                                    whiteSpace: 'nowrap',
                                    background: category === cat ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' : '#f1f5f9',
                                    color: category === cat ? 'white' : '#64748b'
                                }}>{cat}</button>
                            ))}
                        </div>

                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(160px, 1fr))', gap: '15px', maxHeight: 'calc(100vh - 340px)', overflowY: 'auto' }}>
                            {products.map(p => (
                                <div key={p.id} onClick={() => addToCart(p)} style={{
                                    background: p.stock <= 0 ? '#fee2e2' : 'white',
                                    borderRadius: '18px',
                                    padding: '18px',
                                    cursor: p.stock <= 0 ? 'not-allowed' : 'pointer',
                                    border: `2px solid ${p.stock <= 0 ? '#fca5a5' : '#f1f5f9'}`,
                                    opacity: p.stock <= 0 ? 0.6 : 1,
                                    transition: 'all 0.2s'
                                }}>
                                    <div style={{ fontSize: '48px', textAlign: 'center', marginBottom: '10px' }}>{p.image}</div>
                                    <h3 style={{ margin: '0 0 6px 0', fontSize: '14px', fontWeight: '600', color: '#1e293b' }}>{p.name}</h3>
                                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginTop: '8px' }}>
                                        <span style={{ fontSize: '18px', fontWeight: '700', background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent' }}>
                                            ‡∏ø{p.price}
                                        </span>
                                        <span style={{
                                            fontSize: '11px',
                                            color: p.stock <= 0 ? '#dc2626' : p.stock < 10 ? '#f59e0b' : '#10b981',
                                            fontWeight: '600',
                                            background: p.stock <= 0 ? '#fee2e2' : p.stock < 10 ? '#fef3c7' : '#d1fae5',
                                            padding: '3px 8px',
                                            borderRadius: '6px'
                                        }}>
                                            {p.stock <= 0 ? '‡∏´‡∏°‡∏î' : `${p.stock} ‡∏ä‡∏¥‡πâ‡∏ô`}
                                        </span>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div style={{ background: 'rgba(255,255,255,0.98)', borderRadius: '24px', padding: '25px', boxShadow: '0 20px 60px rgba(0,0,0,0.15)', display: 'flex', flexDirection: 'column', animation: 'slideUp 0.5s' }}>
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '20px' }}>
                            <h2 style={{ margin: 0, fontSize: '22px', fontWeight: '700', color: '#1e293b' }}>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
                            {cart.length > 0 && (
                                <button onClick={clearCart} style={{ background: '#fee2e2', color: '#dc2626', border: 'none', padding: '8px 16px', borderRadius: '10px', fontSize: '13px', fontWeight: '600', cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '6px' }}>
                                    <Icons.Trash size={14} />
                                    ‡∏•‡πâ‡∏≤‡∏á
                                </button>
                            )}
                        </div>

                        <div style={{ flex: 1, overflowY: 'auto', marginBottom: '20px' }}>
                            {cart.length === 0 ? (
                                <div style={{ textAlign: 'center', padding: '60px 20px', color: '#94a3b8' }}>
                                    <Icons.ShoppingCart size={64} style={{ opacity: 0.3, marginBottom: '16px' }} />
                                    <p style={{ fontSize: '15px', fontWeight: '500', margin: 0 }}>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</p>
                                </div>
                            ) : (
                                cart.map(item => (
                                    <div key={item.id} style={{ background: '#f8fafc', borderRadius: '14px', padding: '14px', marginBottom: '10px', border: '2px solid #f1f5f9' }}>
                                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '10px' }}>
                                            <div style={{ flex: 1 }}>
                                                <h4 style={{ margin: '0 0 4px 0', fontSize: '14px', fontWeight: '600', color: '#1e293b' }}>{item.name}</h4>
                                                <p style={{ margin: 0, fontSize: '15px', fontWeight: '700', background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent' }}>
                                                    ‡∏ø{item.price.toLocaleString('th-TH')}
                                                </p>
                                            </div>
                                            <button onClick={() => removeFromCart(item.id)} style={{ background: 'none', border: 'none', cursor: 'pointer', color: '#ef4444', padding: '4px' }}>
                                                <Icons.Trash size={16} />
                                            </button>
                                        </div>
                                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                                            <div style={{ display: 'flex', alignItems: 'center', gap: '8px', background: 'white', borderRadius: '10px', padding: '4px', border: '2px solid #e2e8f0' }}>
                                                <button onClick={() => updateQty(item.id, -1)} style={{ background: 'linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%)', border: 'none', borderRadius: '8px', width: '32px', height: '32px', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
                                                    <Icons.Minus size={16} />
                                                </button>
                                                <span style={{ fontSize: '15px', fontWeight: '700', minWidth: '30px', textAlign: 'center' }}>{item.quantity}</span>
                                                <button onClick={() => updateQty(item.id, 1)} style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', border: 'none', borderRadius: '8px', width: '32px', height: '32px', cursor: 'pointer', color: 'white', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
                                                    <Icons.Plus size={16} />
                                                </button>
                                            </div>
                                            <span style={{ fontSize: '16px', fontWeight: '700', color: '#1e293b' }}>
                                                ‡∏ø{(item.price * item.quantity).toLocaleString('th-TH')}
                                            </span>
                                        </div>
                                    </div>
                                ))
                            )}
                        </div>

                        {cart.length > 0 && (
                            <>
                                <div style={{ background: '#f0f9ff', borderRadius: '14px', padding: '14px', marginBottom: '15px', border: '2px solid #bae6fd' }}>
                                    <div style={{ fontSize: '13px', fontWeight: '600', color: '#0369a1', marginBottom: '8px' }}>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</div>
                                    <select value={selectedCustomer?.id || ''} onChange={(e) => setSelectedCustomer(customers.find(c => c.id === parseInt(e.target.value)) || null)}
                                        style={{ width: '100%', padding: '10px', border: '2px solid #7dd3fc', borderRadius: '10px', fontSize: '14px', background: 'white', outline: 'none' }}>
                                        <option value="">‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</option>
                                        {customers.map(c => <option key={c.id} value={c.id}>{c.name} - {c.phone}</option>)}
                                    </select>
                                </div>

                                <div style={{ background: '#fef3c7', borderRadius: '14px', padding: '14px', marginBottom: '15px', border: '2px solid #fde68a' }}>
                                    <div style={{ fontSize: '13px', fontWeight: '600', color: '#92400e', marginBottom: '10px' }}>‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</div>
                                    <div style={{ display: 'flex', gap: '8px' }}>
                                        <input type="number" value={discount} onChange={(e) => setDiscount(Math.max(0, parseFloat(e.target.value) || 0))} placeholder="0"
                                            style={{ flex: 1, padding: '10px', border: '2px solid #fbbf24', borderRadius: '10px', fontSize: '14px', fontWeight: '600', outline: 'none' }} />
                                        <select value={discountType} onChange={(e) => setDiscountType(e.target.value)}
                                            style={{ padding: '10px 14px', border: '2px solid #fbbf24', borderRadius: '10px', fontSize: '14px', fontWeight: '600', cursor: 'pointer', background: 'white' }}>
                                            <option value="percent">%</option>
                                            <option value="fixed">‡∏ø</option>
                                        </select>
                                    </div>
                                </div>

                                <div style={{ background: '#f8fafc', borderRadius: '14px', padding: '16px', marginBottom: '15px', border: '2px solid #e2e8f0' }}>
                                    <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px', fontSize: '14px', color: '#64748b', fontWeight: '500' }}>
                                        <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</span>
                                        <span>‡∏ø{subtotal.toLocaleString('th-TH', { minimumFractionDigits: 2 })}</span>
                                    </div>
                                    {discountAmt > 0 && (
                                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px', fontSize: '14px', color: '#ef4444', fontWeight: '500' }}>
                                            <span>‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</span>
                                            <span>-‡∏ø{discountAmt.toLocaleString('th-TH', { minimumFractionDigits: 2 })}</span>
                                        </div>
                                    )}
                                    {store.enableVAT && (
                                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '12px', fontSize: '14px', color: '#64748b', fontWeight: '500' }}>
                                            <span>‡∏†‡∏≤‡∏©‡∏µ (7%)</span>
                                            <span>‡∏ø{tax.toLocaleString('th-TH', { minimumFractionDigits: 2 })}</span>
                                        </div>
                                    )}
                                    <div style={{ borderTop: '2px dashed #cbd5e1', paddingTop: '12px', display: 'flex', justifyContent: 'space-between' }}>
                                        <span style={{ fontSize: '16px', fontWeight: '700', color: '#1e293b' }}>‡∏¢‡∏≠‡∏î‡∏ä‡∏≥‡∏£‡∏∞‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
                                        <span style={{ fontSize: '24px', fontWeight: '800', background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent' }}>
                                            ‡∏ø{total.toLocaleString('th-TH', { minimumFractionDigits: 2 })}
                                        </span>
                                    </div>
                                </div>

                                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '10px' }}>
                                    <button onClick={() => checkout('‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î')} style={{ background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)', color: 'white', border: 'none', padding: '16px', borderRadius: '14px', fontSize: '15px', fontWeight: '700', cursor: 'pointer', boxShadow: '0 8px 20px rgba(16,185,129,0.3)' }}>
                                        üíµ ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î
                                    </button>
                                    <button onClick={() => checkout('‡∏ö‡∏±‡∏ï‡∏£')} style={{ background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)', color: 'white', border: 'none', padding: '16px', borderRadius: '14px', fontSize: '15px', fontWeight: '700', cursor: 'pointer', boxShadow: '0 8px 20px rgba(59,130,246,0.3)' }}>
                                        üí≥ ‡∏ö‡∏±‡∏ï‡∏£
                                    </button>
                                </div>
                            </>
                        )}
                    </div>

                    {showReceipt && lastReceipt && (
                        <div onClick={() => setShowReceipt(false)} style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, background: 'rgba(0,0,0,0.6)', backdropFilter: 'blur(8px)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 1000, padding: '20px' }}>
                            <div onClick={(e) => e.stopPropagation()} style={{ background: 'white', borderRadius: '20px', padding: '40px', maxWidth: '500px', width: '100%', boxShadow: '0 25px 80px rgba(0,0,0,0.3)' }}>
                                <div style={{ textAlign: 'center', marginBottom: '30px' }}>
                                    <div style={{ width: '80px', height: '80px', background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)', borderRadius: '20px', display: 'flex', alignItems: 'center', justifyContent: 'center', margin: '0 auto 20px' }}>
                                        <Icons.Check size={40} color="white" />
                                    </div>
                                    <h2 style={{ margin: '0 0 8px 0', fontSize: '28px', fontWeight: '800', background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent' }}>
                                        ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!
                                    </h2>
                                    <p style={{ margin: 0, fontSize: '12px', color: '#94a3b8' }}>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏•: {lastReceipt.id}</p>
                                </div>

                                <div id="printableReceipt" style={{ background: '#f8fafc', borderRadius: '14px', padding: '20px', marginBottom: '20px', fontSize: '14px' }}>
                                    <div style={{ textAlign: 'center', marginBottom: '16px', paddingBottom: '12px', borderBottom: '2px dashed #cbd5e1' }}>
                                        <div style={{ fontSize: '24px', marginBottom: '8px' }}>{store.logo}</div>
                                        <div style={{ fontSize: '16px', fontWeight: '700', color: '#1e293b' }}>{store.name}</div>
                                        <div style={{ fontSize: '12px', color: '#64748b', marginTop: '4px' }}>{store.address}</div>
                                        <div style={{ fontSize: '12px', color: '#64748b' }}>‡πÇ‡∏ó‡∏£: {store.phone}</div>
                                        {store.taxId && <div style={{ fontSize: '12px', color: '#64748b' }}>‡πÄ‡∏•‡∏Ç‡∏ú‡∏π‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏†‡∏≤‡∏©‡∏µ: {store.taxId}</div>}
                                    </div>

                                    <div style={{ marginBottom: '12px', paddingBottom: '12px', borderBottom: '1px solid #e2e8f0' }}>
                                        <div style={{ fontSize: '12px', color: '#64748b' }}>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà: {lastReceipt.id}</div>
                                        <div style={{ fontSize: '12px', color: '#64748b' }}>
                                            {new Date(lastReceipt.date).toLocaleDateString('th-TH')} {new Date(lastReceipt.date).toLocaleTimeString('th-TH')}
                                        </div>
                                        {lastReceipt.customer && <div style={{ fontSize: '12px', color: '#64748b' }}>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: {lastReceipt.customer.name}</div>}
                                    </div>

                                    {lastReceipt.items.map((item, i) => (
                                        <div key={i} style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px', fontSize: '13px', color: '#1e293b' }}>
                                            <span>{item.name} x{item.quantity}</span>
                                            <span style={{ fontWeight: '600' }}>‡∏ø{(item.price * item.quantity).toLocaleString('th-TH')}</span>
                                        </div>
                                    ))}

                                    <div style={{ borderTop: '2px dashed #cbd5e1', paddingTop: '12px', marginTop: '12px' }}>
                                        <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '13px', color: '#64748b', marginBottom: '6px' }}>
                                            <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</span>
                                            <span>‡∏ø{lastReceipt.subtotal.toLocaleString('th-TH', { minimumFractionDigits: 2 })}</span>
                                        </div>
                                        {lastReceipt.discount > 0 && (
                                            <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '13px', color: '#ef4444', marginBottom: '6px' }}>
                                                <span>‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</span>
                                                <span>-‡∏ø{lastReceipt.discount.toLocaleString('th-TH', { minimumFractionDigits: 2 })}</span>
                                            </div>
                                        )}
                                        {lastReceipt.vatEnabled && (
                                            <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '13px', color: '#64748b', marginBottom: '6px' }}>
                                                <span>‡∏†‡∏≤‡∏©‡∏µ 7%</span>
                                                <span>‡∏ø{lastReceipt.tax.toLocaleString('th-TH', { minimumFractionDigits: 2 })}</span>
                                            </div>
                                        )}
                                        <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '16px', fontWeight: '700', color: '#1e293b', marginTop: '8px', paddingTop: '8px', borderTop: '2px solid #cbd5e1' }}>
                                            <span>‡∏¢‡∏≠‡∏î‡∏ä‡∏≥‡∏£‡∏∞</span>
                                            <span>‡∏ø{lastReceipt.total.toLocaleString('th-TH', { minimumFractionDigits: 2 })}</span>
                                        </div>
                                        <div style={{ textAlign: 'center', marginTop: '12px', fontSize: '12px', color: '#64748b' }}>
                                            ‡∏ä‡∏≥‡∏£‡∏∞‡∏î‡πâ‡∏ß‡∏¢: {lastReceipt.paymentMethod}
                                        </div>
                                    </div>

                                    <div style={{ textAlign: 'center', marginTop: '16px', paddingTop: '12px', borderTop: '1px dashed #cbd5e1' }}>
                                        <div style={{ fontSize: '12px', color: '#64748b' }}>‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</div>
                                    </div>
                                </div>

                                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '10px' }}>
                                    <button onClick={() => window.print()} style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', color: 'white', border: 'none', padding: '16px', borderRadius: '14px', fontSize: '16px', fontWeight: '700', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '8px' }}>
                                        <Icons.Printer size={20} />
                                        ‡∏û‡∏¥‡∏°‡∏û‡πå
                                    </button>
                                    <button onClick={() => setShowReceipt(false)} style={{ background: '#f1f5f9', color: '#64748b', border: 'none', padding: '16px', borderRadius: '14px', fontSize: '16px', fontWeight: '700', cursor: 'pointer' }}>
                                        ‡∏õ‡∏¥‡∏î
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // Customers Page
        function CustomersPage({ customers, setCustomers }) {
            const [show, setShow] = useState(false);
            const [editing, setEditing] = useState(null);
            const [form, setForm] = useState({ name: '', phone: '', email: '', address: '', notes: '' });

            useEffect(() => {
                if (editing) setForm(editing);
                else setForm({ name: '', phone: '', email: '', address: '', notes: '' });
            }, [editing]);

            const handleSubmit = (e) => {
                e.preventDefault();
                if (editing) {
                    setCustomers(customers.map(c => c.id === editing.id ? form : c));
                    setEditing(null);
                } else {
                    setCustomers([...customers, { ...form, id: Math.max(0, ...customers.map(c => c.id || 0)) + 1 }]);
                }
                setShow(false);
                setForm({ name: '', phone: '', email: '', address: '', notes: '' });
            };

            return (
                <div style={{ background: 'rgba(255,255,255,0.98)', borderRadius: '24px', padding: '30px', boxShadow: '0 20px 60px rgba(0,0,0,0.15)', animation: 'slideUp 0.5s' }}>
                    <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '25px' }}>
                        <h2 style={{ margin: 0, fontSize: '24px', fontWeight: '800', color: '#1e293b' }}>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h2>
                        <button onClick={() => { setEditing(null); setShow(!show); }} style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', color: 'white', border: 'none', padding: '12px 24px', borderRadius: '12px', fontSize: '14px', fontWeight: '600', cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '8px' }}>
                            <Icons.Plus size={18} />
                            ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
                        </button>
                    </div>

                    {(show || editing) && (
                        <div style={{ background: '#f8fafc', borderRadius: '16px', padding: '25px', marginBottom: '25px', border: '2px solid #e2e8f0' }}>
                            <form onSubmit={handleSubmit}>
                                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '15px' }}>
                                    <div>
                                        <label style={{ display: 'block', fontSize: '13px', fontWeight: '600', color: '#64748b', marginBottom: '8px' }}>‡∏ä‡∏∑‡πà‡∏≠ *</label>
                                        <input required type="text" value={form.name} onChange={(e) => setForm({ ...form, name: e.target.value })} style={{ width: '100%', padding: '12px', border: '2px solid #e2e8f0', borderRadius: '10px', fontSize: '14px', outline: 'none' }} />
                                    </div>
                                    <div>
                                        <label style={{ display: 'block', fontSize: '13px', fontWeight: '600', color: '#64748b', marginBottom: '8px' }}>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ *</label>
                                        <input required type="tel" value={form.phone} onChange={(e) => setForm({ ...form, phone: e.target.value })} style={{ width: '100%', padding: '12px', border: '2px solid #e2e8f0', borderRadius: '10px', fontSize: '14px', outline: 'none' }} />
                                    </div>
                                    <div>
                                        <label style={{ display: 'block', fontSize: '13px', fontWeight: '600', color: '#64748b', marginBottom: '8px' }}>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                                        <input type="email" value={form.email} onChange={(e) => setForm({ ...form, email: e.target.value })} style={{ width: '100%', padding: '12px', border: '2px solid #e2e8f0', borderRadius: '10px', fontSize: '14px', outline: 'none' }} />
                                    </div>
                                    <div>
                                        <label style={{ display: 'block', fontSize: '13px', fontWeight: '600', color: '#64748b', marginBottom: '8px' }}>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</label>
                                        <input type="text" value={form.address} onChange={(e) => setForm({ ...form, address: e.target.value })} style={{ width: '100%', padding: '12px', border: '2px solid #e2e8f0', borderRadius: '10px', fontSize: '14px', outline: 'none' }} />
                                    </div>
                                </div>
                                <div style={{ display: 'flex', gap: '10px', marginTop: '20px' }}>
                                    <button type="submit" style={{ flex: 1, background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)', color: 'white', border: 'none', padding: '14px', borderRadius: '12px', fontSize: '15px', fontWeight: '700', cursor: 'pointer' }}>
                                        {editing ? '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å' : '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤'}
                                    </button>
                                    <button type="button" onClick={() => { setEditing(null); setShow(false); }} style={{ background: '#f1f5f9', color: '#64748b', border: 'none', padding: '14px 24px', borderRadius: '12px', fontSize: '15px', fontWeight: '700', cursor: 'pointer' }}>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                                </div>
                            </form>
                        </div>
                    )}

                    {customers.length === 0 ? (
                        <div style={{ textAlign: 'center', padding: '80px 20px', background: '#f8fafc', borderRadius: '20px', border: '2px dashed #cbd5e1' }}>
                            <Icons.Users size={64} color="#cbd5e1" />
                            <h3 style={{ margin: '20px 0 0 0', fontSize: '18px', fontWeight: '600', color: '#94a3b8' }}>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
                        </div>
                    ) : (
                        <div style={{ background: 'white', borderRadius: '16px', overflow: 'hidden', border: '2px solid #e2e8f0' }}>
                            <div style={{ overflowX: 'auto' }}>
                                <table style={{ width: '100%', borderCollapse: 'collapse' }}>
                                    <thead>
                                        <tr style={{ background: '#f8fafc', borderBottom: '2px solid #e2e8f0' }}>
                                            <th style={{ padding: '16px', textAlign: 'left', fontSize: '13px', fontWeight: '700', color: '#64748b' }}>‡∏ä‡∏∑‡πà‡∏≠</th>
                                            <th style={{ padding: '16px', textAlign: 'left', fontSize: '13px', fontWeight: '700', color: '#64748b' }}>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</th>
                                            <th style={{ padding: '16px', textAlign: 'left', fontSize: '13px', fontWeight: '700', color: '#64748b' }}>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</th>
                                            <th style={{ padding: '16px', textAlign: 'center', fontSize: '13px', fontWeight: '700', color: '#64748b' }}>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {customers.map(c => (
                                            <tr key={c.id} style={{ borderBottom: '1px solid #f1f5f9' }}>
                                                <td style={{ padding: '16px', fontSize: '14px', fontWeight: '600', color: '#1e293b' }}>{c.name}</td>
                                                <td style={{ padding: '16px', fontSize: '14px', color: '#64748b' }}>{c.phone}</td>
                                                <td style={{ padding: '16px', fontSize: '14px', color: '#64748b' }}>{c.email || '-'}</td>
                                                <td style={{ padding: '16px' }}>
                                                    <div style={{ display: 'flex', gap: '8px', justifyContent: 'center' }}>
                                                        <button onClick={() => setEditing(c)} style={{ background: '#dbeafe', color: '#2563eb', border: 'none', padding: '8px', borderRadius: '8px', cursor: 'pointer' }}>
                                                            <Icons.Edit size={16} />
                                                        </button>
                                                        <button onClick={() => window.confirm('‡∏•‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ?') && setCustomers(customers.filter(x => x.id !== c.id))} style={{ background: '#fee2e2', color: '#dc2626', border: 'none', padding: '8px', borderRadius: '8px', cursor: 'pointer' }}>
                                                            <Icons.Trash size={16} />
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // Delivery Page
        function DeliveryPage({ orders, setOrders, customers, transactions }) {
            const [show, setShow] = useState(false);
            const [form, setForm] = useState({ customerId: '', transactionId: '', trackingNo: '', carrier: 'Kerry', status: '‡∏£‡∏≠‡∏à‡∏±‡∏î‡∏™‡πà‡∏á', notes: '' });

            const handleCreate = (e) => {
                e.preventDefault();
                const customer = customers.find(c => c.id === parseInt(form.customerId));
                const txn = transactions.find(t => t.id === form.transactionId);
                if (!customer || !txn) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢');
                
                const order = {
                    id: `ORD-${Date.now()}`,
                    ...form,
                    customerId: parseInt(form.customerId),
                    customer,
                    transaction: txn,
                    createdAt: new Date().toISOString()
                };
                setOrders([...orders, order]);
                setShow(false);
                setForm({ customerId: '', transactionId: '', trackingNo: '', carrier: 'Kerry', status: '‡∏£‡∏≠‡∏à‡∏±‡∏î‡∏™‡πà‡∏á', notes: '' });
            };

            const updateStatus = (id, status) => {
                setOrders(orders.map(o => o.id === id ? { ...o, status } : o));
            };

            const statusColors = {
                '‡∏£‡∏≠‡∏à‡∏±‡∏î‡∏™‡πà‡∏á': { bg: '#fef3c7', text: '#d97706' },
                '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á': { bg: '#dbeafe', text: '#2563eb' },
                '‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à': { bg: '#d1fae5', text: '#059669' },
                '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å': { bg: '#fee2e2', text: '#dc2626' }
            };

            return (
                <div style={{ background: 'rgba(255,255,255,0.98)', borderRadius: '24px', padding: '30px', boxShadow: '0 20px 60px rgba(0,0,0,0.15)', animation: 'slideUp 0.5s' }}>
                    <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '25px', flexWrap: 'wrap', gap: '16px' }}>
                        <div>
                            <h2 style={{ margin: '0 0 8px 0', fontSize: '24px', fontWeight: '800', color: '#1e293b' }}>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</h2>
                            <p style={{ margin: 0, fontSize: '14px', color: '#64748b' }}>‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</p>
                        </div>
                        <button onClick={() => setShow(!show)} style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', color: 'white', border: 'none', padding: '12px 24px', borderRadius: '12px', fontSize: '14px', fontWeight: '600', cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '8px' }}>
                            <Icons.Plus size={18} />
                            ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á
                        </button>
                    </div>

                    {show && (
                        <div style={{ background: '#f8fafc', borderRadius: '16px', padding: '25px', marginBottom: '25px', border: '2px solid #e2e8f0' }}>
                            <form onSubmit={handleCreate}>
                                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '15px' }}>
                                    <div>
                                        <label style={{ display: 'block', fontSize: '13px', fontWeight: '600', color: '#64748b', marginBottom: '8px' }}>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ *</label>
                                        <select required value={form.customerId} onChange={(e) => setForm({ ...form, customerId: e.target.value })} style={{ width: '100%', padding: '12px', border: '2px solid #e2e8f0', borderRadius: '10px', fontSize: '14px', outline: 'none' }}>
                                            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ --</option>
                                            {customers.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}
                                        </select>
                                    </div>
                                    <div>
                                        <label style={{ display: 'block', fontSize: '13px', fontWeight: '600', color: '#64748b', marginBottom: '8px' }}>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ *</label>
                                        <select required value={form.transactionId} onChange={(e) => setForm({ ...form, transactionId: e.target.value })} style={{ width: '100%', padding: '12px', border: '2px solid #e2e8f0', borderRadius: '10px', fontSize: '14px', outline: 'none' }}>
                                            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ --</option>
                                            {transactions.map(t => <option key={t.id} value={t.id}>{t.id} - ‡∏ø{t.total.toLocaleString('th-TH')}</option>)}
                                        </select>
                                    </div>
                                    <div>
                                        <label style={{ display: 'block', fontSize: '13px', fontWeight: '600', color: '#64748b', marginBottom: '8px' }}>Tracking</label>
                                        <input type="text" value={form.trackingNo} onChange={(e) => setForm({ ...form, trackingNo: e.target.value })} style={{ width: '100%', padding: '12px', border: '2px solid #e2e8f0', borderRadius: '10px', fontSize: '14px', outline: 'none' }} />
                                    </div>
                                    <div>
                                        <label style={{ display: 'block', fontSize: '13px', fontWeight: '600', color: '#64748b', marginBottom: '8px' }}>‡∏Ç‡∏ô‡∏™‡πà‡∏á</label>
                                        <select value={form.carrier} onChange={(e) => setForm({ ...form, carrier: e.target.value })} style={{ width: '100%', padding: '12px', border: '2px solid #e2e8f0', borderRadius: '10px', fontSize: '14px', outline: 'none' }}>
                                            <option>Kerry</option>
                                            <option>Flash</option>
                                            <option>J&T</option>
                                            <option>Thailand Post</option>
                                        </select>
                                    </div>
                                </div>
                                <div style={{ display: 'flex', gap: '10px', marginTop: '20px' }}>
                                    <button type="submit" style={{ flex: 1, background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)', color: 'white', border: 'none', padding: '14px', borderRadius: '12px', fontSize: '15px', fontWeight: '700', cursor: 'pointer' }}>
                                        ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                                    </button>
                                    <button type="button" onClick={() => setShow(false)} style={{ background: '#f1f5f9', color: '#64748b', border: 'none', padding: '14px 24px', borderRadius: '12px', fontSize: '15px', fontWeight: '700', cursor: 'pointer' }}>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                                </div>
                            </form>
                        </div>
                    )}

                    {orders.length === 0 ? (
                        <div style={{ textAlign: 'center', padding: '80px 20px', background: '#f8fafc', borderRadius: '20px', border: '2px dashed #cbd5e1' }}>
                            <Icons.Truck size={64} color="#cbd5e1" />
                            <h3 style={{ margin: '20px 0 0 0', fontSize: '18px', fontWeight: '600', color: '#94a3b8' }}>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</h3>
                        </div>
                    ) : (
                        <div style={{ display: 'grid', gap: '16px' }}>
                            {orders.map(o => (
                                <div key={o.id} style={{ background: 'white', borderRadius: '16px', padding: '24px', border: '2px solid #e2e8f0' }}>
                                    <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '16px', flexWrap: 'wrap', gap: '12px' }}>
                                        <div>
                                            <div style={{ fontSize: '16px', fontWeight: '700', color: '#1e293b' }}>{o.id}</div>
                                            <div style={{ fontSize: '13px', color: '#64748b' }}>{new Date(o.createdAt).toLocaleString('th-TH')}</div>
                                        </div>
                                        <span style={{
                                            fontSize: '13px',
                                            fontWeight: '600',
                                            padding: '6px 14px',
                                            borderRadius: '10px',
                                            background: statusColors[o.status]?.bg,
                                            color: statusColors[o.status]?.text
                                        }}>{o.status}</span>
                                    </div>

                                    <div style={{ padding: '16px', background: '#f8fafc', borderRadius: '12px', marginBottom: '16px' }}>
                                        <div style={{ fontSize: '12px', color: '#94a3b8', marginBottom: '4px' }}>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</div>
                                        <div style={{ fontSize: '14px', fontWeight: '600', color: '#1e293b' }}>{o.customer.name}</div>
                                        <div style={{ fontSize: '13px', color: '#64748b' }}>üìû {o.customer.phone}</div>
                                    </div>

                                    {o.trackingNo && (
                                        <div style={{ padding: '12px', background: '#ede9fe', borderRadius: '10px', marginBottom: '16px' }}>
                                            <div style={{ fontSize: '12px', color: '#6b21a8', marginBottom: '4px' }}>Tracking</div>
                                            <div style={{ fontSize: '14px', fontWeight: '700', color: '#5b21b6', fontFamily: 'monospace' }}>{o.trackingNo}</div>
                                            <div style={{ fontSize: '12px', color: '#7c3aed' }}>‡∏Ç‡∏ô‡∏™‡πà‡∏á: {o.carrier}</div>
                                        </div>
                                    )}

                                    {o.status !== '‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à' && o.status !== '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å' && (
                                        <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>
                                            {o.status === '‡∏£‡∏≠‡∏à‡∏±‡∏î‡∏™‡πà‡∏á' && (
                                                <button onClick={() => updateStatus(o.id, '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á')} style={{ flex: 1, background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)', color: 'white', border: 'none', padding: '12px', borderRadius: '10px', fontSize: '14px', fontWeight: '600', cursor: 'pointer' }}>
                                                    üöö ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏î‡∏™‡πà‡∏á
                                                </button>
                                            )}
                                            {o.status === '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á' && (
                                                <button onClick={() => updateStatus(o.id, '‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à')} style={{ flex: 1, background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)', color: 'white', border: 'none', padding: '12px', borderRadius: '10px', fontSize: '14px', fontWeight: '600', cursor: 'pointer' }}>
                                                    ‚úÖ ‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
                                                </button>
                                            )}
                                            <button onClick={() => updateStatus(o.id, '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å')} style={{ background: '#fee2e2', color: '#dc2626', border: 'none', padding: '12px 20px', borderRadius: '10px', fontSize: '14px', fontWeight: '600', cursor: 'pointer' }}>
                                                ‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                                            </button>
                                        </div>
                                    )}
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        }

        // Products Page (Simplified)
        function ProductsPage({ products }) {
            return (
                <div style={{ background: 'rgba(255,255,255,0.98)', borderRadius: '24px', padding: '30px', boxShadow: '0 20px 60px rgba(0,0,0,0.15)' }}>
                    <h2>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
                    <p style={{ color: '#64748b' }}>‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ ‡∏Ç‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£ Export/Import ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
                </div>
            );
        }

        // Dashboard Page
        function DashboardPage({ transactions, todaySales, todayProfit }) {
            const totalRevenue = transactions.reduce((sum, t) => sum + t.total, 0);
            const totalProfit = transactions.reduce((sum, t) => sum + t.profit, 0);

            return (
                <div style={{ background: 'rgba(255,255,255,0.98)', borderRadius: '24px', padding: '30px', boxShadow: '0 20px 60px rgba(0,0,0,0.15)', animation: 'slideUp 0.5s' }}>
                    <h2 style={{ marginBottom: '30px' }}>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏£‡∏∏‡∏õ</h2>
                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '20px' }}>
                        {[
                            { label: '‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ', value: todaySales, gradient: '#667eea, #764ba2' },
                            { label: '‡∏Å‡∏≥‡πÑ‡∏£‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ', value: todayProfit, gradient: '#10b981, #059669' },
                            { label: '‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°', value: totalRevenue, gradient: '#f59e0b, #d97706' },
                            { label: '‡∏Å‡∏≥‡πÑ‡∏£‡∏£‡∏ß‡∏°', value: totalProfit, gradient: '#8b5cf6, #6d28d9' }
                        ].map(({ label, value, gradient }) => (
                            <div key={label} style={{ background: `linear-gradient(135deg, ${gradient})`, borderRadius: '16px', padding: '24px', color: 'white' }}>
                                <div style={{ fontSize: '13px', opacity: 0.9, marginBottom: '8px' }}>{label}</div>
                                <div style={{ fontSize: '32px', fontWeight: '800' }}>‡∏ø{value.toLocaleString('th-TH', { maximumFractionDigits: 0 })}</div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        // Settings Page
        function SettingsPage({ store, setStore, exportData, importData }) {
            const fileRef = useRef(null);
            const [editing, setEditing] = useState(false);
            const [temp, setTemp] = useState(store);

            return (
                <div style={{ background: 'rgba(255,255,255,0.98)', borderRadius: '24px', padding: '30px', boxShadow: '0 20px 60px rgba(0,0,0,0.15)', animation: 'slideUp 0.5s' }}>
                    <h2 style={{ marginBottom: '30px' }}>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</h2>

                    <div style={{ background: '#f8fafc', borderRadius: '16px', padding: '24px', marginBottom: '24px', border: '2px solid #e2e8f0' }}>
                        <h3 style={{ margin: '0 0 16px 0', fontSize: '18px', fontWeight: '700', color: '#1e293b' }}>‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ</h3>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                            <input type="checkbox" id="vat" checked={store.enableVAT} onChange={(e) => setStore({ ...store, enableVAT: e.target.checked })} style={{ width: '20px', height: '20px', cursor: 'pointer' }} />
                            <label htmlFor="vat" style={{ fontSize: '15px', fontWeight: '600', color: '#1e293b', cursor: 'pointer' }}>‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô VAT 7%</label>
                        </div>
                        <p style={{ margin: '12px 0 0 32px', fontSize: '13px', color: '#64748b' }}>
                            {store.enableVAT ? '‚úÖ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ 7%' : '‚ùå ‡πÑ‡∏°‡πà‡∏Ñ‡∏¥‡∏î‡∏†‡∏≤‡∏©‡∏µ'}
                        </p>
                    </div>

                    <div style={{ background: '#f0f9ff', borderRadius: '16px', padding: '24px', marginBottom: '24px', border: '2px solid #bae6fd' }}>
                        <h3 style={{ margin: '0 0 16px 0', fontSize: '18px', fontWeight: '700', color: '#0369a1' }}>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
                        <div style={{ display: 'flex', gap: '12px', flexWrap: 'wrap' }}>
                            <button onClick={exportData} style={{ flex: 1, background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)', color: 'white', border: 'none', padding: '14px 20px', borderRadius: '12px', fontSize: '14px', fontWeight: '600', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '8px', minWidth: '200px' }}>
                                <Icons.Download size={18} />
                                ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Backup)
                            </button>
                            <button onClick={() => fileRef.current?.click()} style={{ flex: 1, background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', color: 'white', border: 'none', padding: '14px 20px', borderRadius: '12px', fontSize: '14px', fontWeight: '600', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '8px', minWidth: '200px' }}>
                                <Icons.Upload size={18} />
                                ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Restore)
                            </button>
                            <input ref={fileRef} type="file" accept=".json" onChange={importData} style={{ display: 'none' }} />
                        </div>
                        <p style={{ margin: '16px 0 0 0', fontSize: '13px', color: '#0369a1' }}>
                            üí° ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå .json ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏ä‡∏£‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á
                        </p>
                    </div>

                    <div style={{ background: '#f8fafc', borderRadius: '16px', padding: '24px', border: '2px solid #e2e8f0' }}>
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '20px' }}>
                            <h3 style={{ margin: 0, fontSize: '18px', fontWeight: '700', color: '#1e293b' }}>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô</h3>
                            {!editing ? (
                                <button onClick={() => { setTemp(store); setEditing(true); }} style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', color: 'white', border: 'none', padding: '10px 20px', borderRadius: '10px', fontSize: '13px', fontWeight: '600', cursor: 'pointer' }}>
                                    ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                                </button>
                            ) : (
                                <div style={{ display: 'flex', gap: '8px' }}>
                                    <button onClick={() => { setStore(temp); setEditing(false); }} style={{ background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)', color: 'white', border: 'none', padding: '10px 20px', borderRadius: '10px', fontSize: '13px', fontWeight: '600', cursor: 'pointer' }}>
                                        ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                                    </button>
                                    <button onClick={() => { setTemp(store); setEditing(false); }} style={{ background: '#f1f5f9', color: '#64748b', border: 'none', padding: '10px 20px', borderRadius: '10px', fontSize: '13px', fontWeight: '600', cursor: 'pointer' }}>
                                        ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                                    </button>
                                </div>
                            )}
                        </div>

                        <div style={{ maxWidth: '600px' }}>
                            {['logo', 'name', 'address', 'phone', 'taxId'].map(field => (
                                <div key={field} style={{ marginBottom: '16px' }}>
                                    <label style={{ display: 'block', fontSize: '13px', fontWeight: '600', color: '#64748b', marginBottom: '8px' }}>
                                        {field === 'logo' ? '‡πÇ‡∏•‡πÇ‡∏Å‡πâ' : field === 'name' ? '‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô' : field === 'address' ? '‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà' : field === 'phone' ? '‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£' : '‡πÄ‡∏•‡∏Ç‡∏ú‡∏π‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏†‡∏≤‡∏©‡∏µ'}
                                    </label>
                                    {field === 'address' ? (
                                        <textarea disabled={!editing} value={temp[field]} onChange={(e) => setTemp({ ...temp, [field]: e.target.value })} rows={3}
                                            style={{ width: '100%', padding: '12px', border: '2px solid #e2e8f0', borderRadius: '10px', fontSize: '14px', outline: 'none', resize: 'none', background: editing ? 'white' : '#f8fafc' }} />
                                    ) : (
                                        <input type="text" disabled={!editing} value={temp[field]} onChange={(e) => setTemp({ ...temp, [field]: e.target.value })}
                                            style={{ width: '100%', padding: '12px', border: '2px solid #e2e8f0', borderRadius: '10px', fontSize: field === 'logo' ? '24px' : '15px', textAlign: field === 'logo' ? 'center' : 'left', outline: 'none', background: editing ? 'white' : '#f8fafc' }} />
                                    )}
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        }

        // Render
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>